{% extends "admin/base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="container">
    <div class="header">
        <h1>Pale Blue Search Admin</h1>
        <div class="nav">
            <a href="/admin/" class="active">Dashboard</a>
            <a href="/admin/crawlers">Crawlers</a>
            <a href="/admin/seeds">Seeds</a>
            <a href="/admin/queue">Queue</a>
            <a href="/admin/history">History</a>
            <a href="/admin/analytics">Analytics</a>
            <a href="/admin/logout">Logout</a>
        </div>
    </div>

    <div class="card">
        <h2>Statistics</h2>
        <div class="stats-grid">
            <div class="stat-box">
                <div class="value">{{ "{:,}".format(stats.indexed_pages) }}</div>
                <div class="label">Indexed Pages</div>
            </div>
            <div class="stat-box">
                <div class="value">{{ "{:,}".format(stats.queue_size) }}</div>
                <div class="label">Queue Size</div>
            </div>
            <div class="stat-box">
                <div class="value">{{ "{:,}".format(stats.visited_count) }}</div>
                <div class="label">Visited URLs</div>
            </div>
        </div>
    </div>

    <div class="card">
        <h2>Crawler Status</h2>
        <table>
            <tr>
                <th>Default Worker</th>
                <td>
                    {% if stats.worker_status == "running" %}
                        <span style="color: #22c55e; font-weight: bold;">● Running</span>
                    {% elif stats.worker_status == "stopped" %}
                        <span style="color: #ef4444; font-weight: bold;">● Stopped</span>
                    {% else %}
                        <span style="color: #f59e0b;">● {{ stats.worker_status }}</span>
                    {% endif %}
                </td>
            </tr>
            <tr><th>Last Crawl</th><td>{{ stats.last_crawl or "Never" }}</td></tr>
        </table>
        <div class="form-row" style="margin-top: 1rem;">
            <a href="/admin/crawlers"><button>Manage Crawler Instances</button></a>
        </div>
    </div>

    <div class="card">
        <h2>Quick Actions</h2>
        <div class="form-row">
            <a href="/admin/seeds"><button>Manage Seed URLs</button></a>
            <a href="/admin/analytics"><button>Search Analytics</button></a>
            <a href="/"><button>View Search</button></a>
        </div>
    </div>
</div>
{% endblock %}
